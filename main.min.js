const t=document.querySelector(".gameframe").contentWindow;let e=document.createElement("style");t.document.head.appendChild(e);let n=document.querySelector(".gameframe").contentWindow.document.body;document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=0");var o=document.createElement("meta");o.setAttribute("http-equiv","X-UA-Compatible"),o.setAttribute("content","ie=edge"),t.document.head.appendChild(o);const i=!0,a=!0,s=!0,l=!0,r=!0,c=!0,d=!0,p=".game-view>.top-section,.room-view{margin-top:0}.stats-view,[data-hook=ok]{text-transform:uppercase}*{user-select:none}body{background:#1a2125}[data-hook=leave-btn]{background:#c13535!important;margin-right:6px}.inputrow,.roomlist-view>.dialog>.splitter>.buttons>.file-btn,.sound-button-container,[data-hook=rec-btn],[data-hook=tvideo-lowlatency],[data-hook=tvideo-showavatars],[data-hook=tvideo-showindicators],[data-hook=tvideo-teamcol],div.chatbox-view>div>div.input,div:has(>[data-hook=chatbgmode]),div:has(>[data-hook=chatfocusheight-range]),div:has(>[data-hook=chatopacity-range]){display:none!important}div.chatbox-view>div>div.input{pointer-events:all}div.chatbox-view>div>div.input>input{overflow:hidden}.game-view>[data-hook=popups]{background-color:#1a212585!important}h1{border-bottom-color:#fec45b!important}.room-view{margin-bottom:0;height:100%}.room-view>.container{margin-top:auto!important;max-width:none;max-height:none;border-radius:0;width:100%;margin-bottom:30px}.room-view>.container>.header-btns{bottom:0;top:auto;display:flex;flex-flow:row-reverse;left:10px;right:auto}[data-hook=stadium-pick]{position:fixed!important;background:0 0!important;color:transparent!important;width:300px;height:20px}[data-hook=stadium-name]{text-decoration:underline}.room-view>.container>.controls{display:flex;align-self:center;position:absolute;bottom:0;right:10px;top:auto;margin-bottom:15px!important;z-index:1;flex-flow:row-reverse}.settings-view{width:100%;height:100%;max-height:unset;border-radius:0}.settings-view .tabcontents{width:100%;text-align:-webkit-center}.settings-view .section.selected{display:flex;width:max-content}.choose-nickname-view{flex-direction:row-reverse}.fade-out{opacity:0;transition:opacity 10s ease-out}.game-view>.bottom-section{position:absolute;bottom:0;left:0;width:100%;height:100%;pointer-events:none}.roomlist-view>.dialog,.view-wrapper>.dialog{max-width:calc(100vw - 2vw);max-height:calc(100vh - 2vw)}.chatbox-view-contents>.drag,.graph,.showing-room-view>.gameplay-section{display:none}.filters::after{content:\"Vixel Dev 2024 - InjecThor\";white-space:pre;font-style:italic}button[data-hook=shirt-btn]:after{content:'â—‘';font-size:1.25em}button[data-hook=shirt-btn]{margin-right:6px;margin-left:6px}div.chatbox-view>div>div.log.subtle-thin-scrollbar>div>p{display:none;text-shadow:1px 0 4px rgba(0,0,0,.66)}div.chatbox-view>div>div.log.subtle-thin-scrollbar>div>p:nth-last-child(-n+5){opacity:1;display:block;animation:10s forwards fadeOut}.log>div>p:has(br){display:none!important}@keyframes fadeOut{0%{opacity:1}100%{opacity:0;display:none}}.chatbox-view-contents{flex-direction:column-reverse;pointer-events:none;background:0 0;height:100vh;position:absolute;text-align:center;align-items:center;top:30px;width:100vw}.showing-room-view>.bottom-section>.chatbox-view>div{top:0!important}.chatbox-view-contents>.log{flex-direction:column}.chatbox-view{pointer-events:none;position:absolute;left:0;top:0;height:0!important;overflow-y:visible}.log-contents{display:flex;flex-direction:column-reverse}.stats-view{left:50%;bottom:0;background-color:transparent;text-shadow:1px 1px 1px #000,0 1px 1px #000;padding:8px;margin:4px;line-height:1.5em;position:absolute;text-align:center!important;opacity:.25;width:min-content;transform:translate(-50%,0);pointer-events:all;display:flex;flex-direction:column-reverse}.chatbox-view-contents>.autocompletebox{position:relative}",u={url:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' image-rendering='optimizeQuality' shape-rendering='geometricPrecision' text-rendering='geometricPrecision' viewBox='0 0 2859 2858'%3E%3Cpath fill='%23eda242' d='M1249 0h124a139997 139997 0 0 1 548 550l2 120-1 3L1249 0Zm-143 26h2l788 789L816 1896 26 1106 1106 26Zm206 500c28 1 45 15 51 43l-11 357c-6 26-22 41-49 44a51 51 0 0 1-50-55l10-287-291 10c-31-3-49-20-51-51 2-27 16-43 43-49l348-12Zm-489 99c20-1 36 7 47 24l265 578c11 28 3 50-22 66-29 11-51 4-67-21L779 687c-4-34 11-55 44-62ZM587 920a52 52 0 0 1 50 43l-9 298 12 1c90-4 180-7 271-9 34-2 54 14 60 49-4 32-22 49-54 50l-338 12c-34-3-52-22-52-56l11-340c4-29 20-45 49-48ZM0 1371v-118l1-5 674 673a3825 3825 0 0 1-129-2L2 1376l-2-5Zm1543-36a5355 5355 0 0 1 61 63l-205 205h-3l-60-59v-2l207-207Zm206 202 170 172 2 4 2 210-1 207a13671 13671 0 0 1-175-176 23576 23576 0 0 1 2-417Zm-120 3 2 149-1 149-149-150 148-148Zm408 289 5 2 166 167 4 8v415l-172-171-3-7v-414Zm292 292 149 149-149 149v-298Zm231 233h3l60 61v2l-205 205h-2l-61-60v-3l205-205Zm299 261v2l-3 5-236 236h-7l-137-47c-3-3-4-7-3-10v-67c4-11 11-20 22-26l227-228c5-6 13-9 21-8h58c4-1 8 0 11 4l47 139Z'/%3E%3C/svg%3E",height:"100px"},h={name:"Inter",type:"sans-serif",url:"https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap"};localStorage.getItem("low_latency_canvas")||(localStorage.setItem("low_latency_canvas",0),location.reload());function m(){const t=n.querySelector(".chatbox-view").querySelector(".input");t.querySelector("input");t.style=""}new MutationObserver((function(t,e){D("loader-view")||(n.querySelector(".roomlist-view")?(D("search")||function(){if(void 0!==a){const t=document.createElement("div");t.className="label-input",t.style.backgroundColor="transparent",t.style.padding="0",t.innerHTML='<label>Search a room:</label><br><input data-hook="search" placeholder="Type here..." type="text">';_(n.querySelector("div.dialog>p:nth-child(2)"),t);const e=t.querySelector("input");e.addEventListener("input",(function(){M(e.value)}))}}(),D("url-room")||function(){if(void 0!==s){let t=document.createElement("button");t.setAttribute("data-hook","url-room"),t.innerHTML='<i class="icon-link"></i><div>URL Room</div>',t.addEventListener("click",(function(){if(!n.querySelector('[data-hook="input-url"]')){let t=document.createElement("form");t.action="javascript:void(0);",t.innerHTML='<div class="label-input" style="background-color: transparent"><label>URL:</label><input data-hook="input-url" type="url"></div>';const e=document.createElement("div");e.className="label-input",e.style.backgroundColor="transparent",e.style.padding="0",e.style.display="flex",e.innerHTML='<label>URL:</label><br><input data-hook="input-url" type="url">',D("search").parentNode.style.display="none",_(n.querySelector("div.dialog > p:nth-child(2)"),e);const o=e.querySelector("input");o.focus(),o.addEventListener("blur",(function(){D("search").parentNode.style.display="flex",e.remove()})),o.addEventListener("submit",(function(){!function(t){const e=t.replace(/^https?:\/\/(www\.)?haxball\.com\/play\?c=/,"");e.length>0&&window.location.replace("https://www.haxball.com/play?c="+e)}(D("input-url").value)}))}})),_(D("join"),t)}}(),M(D("search").value),W(!1)):n.querySelector(".settings-view")?D("inputopacity-value")||(!function(){const t=D("inputsec"),e=localStorage.getItem("input_opacity")||.8,n=localStorage.getItem("input_size")||40,o=localStorage.getItem("input_fixed")||0,i=(localStorage.getItem("input_pwm"),localStorage.getItem("input_margin")||10),a=document.createElement("div");a.classList.add("option-row");const s=document.createElement("div");s.setAttribute("style","margin-right: 10px; flex: 1; max-width: 115px;"),s.textContent="Controls Opacity";const l=document.createElement("div");l.setAttribute("style","width: 40px"),l.setAttribute("data-hook","inputopacity-value");const r=document.createElement("input");r.classList.add("slider"),r.setAttribute("type","range"),r.setAttribute("min","0.25"),r.setAttribute("max","1"),r.setAttribute("step","0.01"),r.setAttribute("data-hook","inputopacity-range"),r.onchange=K,r.oninput=K,r.value=e,l.innerText=r.value,a.appendChild(s),a.appendChild(l),a.appendChild(r);const c=document.createElement("div");c.classList.add("option-row");const d=document.createElement("div");d.setAttribute("style","margin-right: 10px; flex: 1; max-width: 115px;"),d.textContent="Joystick Size";const p=document.createElement("div");p.setAttribute("style","width: 40px"),p.setAttribute("data-hook","inputsize-value");const u=document.createElement("input");u.classList.add("slider"),u.setAttribute("type","range"),u.setAttribute("min","30"),u.setAttribute("max","50"),u.setAttribute("step","1"),u.setAttribute("data-hook","inputsize-range"),u.onchange=X,u.oninput=X,u.value=n,p.innerText=u.value,c.appendChild(d),c.appendChild(p),c.appendChild(u);const h=document.createElement("div");h.classList.add("option-row");const m=document.createElement("div");m.setAttribute("style","margin-right: 10px; flex: 1; max-width: 115px;"),m.textContent="Joystick Margin";const v=document.createElement("div");v.setAttribute("style","width: 40px"),v.setAttribute("data-hook","inputmargin-value");const y=document.createElement("input");y.classList.add("slider"),y.setAttribute("type","range"),y.setAttribute("min","0"),y.setAttribute("max","35"),y.setAttribute("step","1"),y.setAttribute("data-hook","inputmargin-range"),y.onchange=P,y.oninput=P,y.value=i,v.innerText=y.value,h.appendChild(m),h.appendChild(v),h.appendChild(y);const b=document.createElement("div");b.classList.add("toggle");const g=document.createElement("i");1==o?(g.classList.add("icon-ok"),h.style.display="flex"):(g.classList.add("icon-cancel"),h.style.display="none");b.appendChild(g),b.innerHTML+="Fixed Joystick",b.onclick=R,t.appendChild(b),t.appendChild(h),t.appendChild(a),t.appendChild(c),V()}(),function(){const t=D("miscsec");if(!D("reset-all-btn")){let e=document.createElement("button");e.setAttribute("data-hook","reset-all-btn"),e.innerHTML="Reset all",t.appendChild(document.createElement("br")),t.appendChild(e),t.innerHTML+="<p style='font-size: small;font-style: italic;opacity: 0.5;'>You'll see changes next <br>time you open the app.",D("reset-all-btn").addEventListener("click",(function(){localStorage.clear()}))}}(),W(!1)):n.querySelector(".room-view")||n.querySelector(".showing-room-view")?(D("store")||function(){if(void 0!==l){let t=document.createElement("button");t.setAttribute("data-hook","store"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 407 407" fill="white" style="height:0.85em; width: auto"><path d="M402 84 323 5c-3-3-7-5-12-5H17C8 0 0 8 0 17v373c0 9 8 17 17 17h373c9 0 17-8 17-17V96c0-4-2-9-5-12zm-101 80H67V39h234v125z"></path><path d="M214 148h43c3 0 6-2 6-6V60c0-4-3-6-6-6h-43c-3 0-6 2-6 6v82c0 4 3 6 6 6z"></path></svg> Store',_(D("rec-btn"),t),t.addEventListener("click",(function(){z("/store")}))}}(),n.querySelector(".room-view .admin")&&(n.querySelectorAll(".player-list-item").forEach(A),D("shirt-btn")||function(){const t=document.createElement("button");t.setAttribute("data-hook","shirt-btn"),t.classList.add("admin-only"),t.setAttribute("red",""),t.onclick=T;const e=document.createElement("button");e.setAttribute("data-hook","shirt-btn"),e.classList.add("admin-only"),e.setAttribute("blue",""),e.onclick=T,n.querySelector(".t-red > .buttons").appendChild(t),n.querySelector(".t-blue > .buttons").appendChild(e)}(),D("password-btn")||function(){if(void 0!==d){let t=document.createElement("button");t.setAttribute("data-hook","password-btn"),t.style.fontSize="1em",t.style.padding="5px 0",t.classList.add("admin-only");let e=document.createElement("i");e.classList.add("icon-lock"),t.appendChild(e),t.innerHTML+="Password",_(D("reset-all-btn"),t),t.addEventListener("click",(function(){!function(){const t=document.createElement("div");t.classList.add("dialog","basic-dialog","admin-only");const e=document.createElement("h1");e.textContent="Change password";const n=document.createElement("p");n.textContent="Enter the new password or leave the input empty to set the room as public";const o=document.createElement("input");o.setAttribute("data-hook","pass-input"),o.setAttribute("type","text"),o.setAttribute("maxlength","30"),o.setAttribute("placeholder","No password");const i=document.createElement("div");i.classList.add("buttons");const a=document.createElement("button");a.setAttribute("data-hook","close-pass"),a.textContent="Close";const s=document.createElement("button");s.setAttribute("data-hook","set-pass"),s.textContent="Set password",i.appendChild(a),i.appendChild(s),t.appendChild(e),t.appendChild(n),t.appendChild(o),t.appendChild(i);let l=D("popups");D("popups").appendChild(t),l.style.display="flex",o.onkeydown=function(t){t.stopPropagation()},a.onclick=function(){t.remove(),l.style.display="none"},s.onclick=function(){""==o.value?z("/clear_password"):z("/set_password "+o.value),t.remove(),l.style.display="none"}}()}))}}()),H(),W(!1,!0)):!n.querySelector(".game-view")||n.querySelector(".showing-room-view")||n.querySelector(".settings-view")||(W(!0),H()))})).observe(n,{childList:!0,subtree:!0}),document.querySelector(".rightbar").remove();const v=document.createElement("div"),y=document.createElement("div"),b=document.createElement("div"),g=document.createElement("p");let f=["",0];v.setAttribute("id","chat-joystick"),y.setAttribute("id","chat-joystick-panel"),b.setAttribute("id","chat-stick"),b.innerHTML='<svg id="chat-svg" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20"><path d="M5.8 12.2V6H2C.9 6 0 6.9 0 8v6c0 1.1.9 2 2 2h1v3l3-3h5c1.1 0 2-.9 2-2v-1.82a.943.943 0 0 1-.2.021h-7zM18 1H9c-1.1 0-2 .9-2 2v8h7l3 3v-3h1c1.1 0 2-.899 2-2V3c0-1.1-.9-2-2-2"/></svg>',g.setAttribute("id","chat-joystick-label"),g.innerText="GG!",document.body.appendChild(y),y.appendChild(v),v.appendChild(g),v.appendChild(b);let w=document.createElement("style");w.innerHTML="#chat-joystick,\n                                    #chat-stick {\n                                        /*touch-action: none;*/\n                                        color:#dedede55;\n                                        font-weight:bolder;\n                                        font-size:1.5rem;\n                                        border-radius: 50%;\n                                    }\n\n                                    #chat-joystick {\n                                        width: 120px;\n                                        height: 120px;\n                                        opacity: 1;\n                                        position: absolute;\n                                        right: 0;\n                                        top: 0;\n                                        margin:30px\n                                    }\n\n                                    #chat-joystick-panel {\n\t\t\t\t\t\t\t\t\t    width: min-content;\n\t\t\t\t\t\t\t\t\t    height: min-content;\n\t\t\t\t\t\t\t\t\t    position: absolute;\n\t\t\t\t\t\t\t\t\t    right: 0;\n\t\t\t\t\t\t\t\t\t    top: 35px;\n\t\t\t\t\t\t\t\t\t    display: none;\n                                        z-index: 3;\n                                        opacity: var(--joystick-opacity);\n\t\t\t\t\t\t\t\t\t}\n                                    \n                                    #chat-stick {\n                                        width: calc(100px * .45);\n                                        height: calc(100px * .45);\n                                        position: absolute;\n                                        top: 50%;\n                                        left: 50%;\n                                        transform: translate(-50%, -50%);\n                                        background-color:#244967;\n                                        display: flex;\n\t\t\t\t\t\t\t\t\t    align-items: center;\n\t\t\t\t\t\t\t\t\t    justify-content: center;\n                                        box-shadow: rgba(0, 0, 0, 0.66) 1px 0px 4px;\n                                        filter: saturate(1.4);\n                                    }\n\n                                    #chat-svg{\n                                    \tfill: #FFFFFF;\n                                    }\n\n                                    #chat-joystick-label{\n                                    \t    color: white;\n\t\t\t\t\t\t\t\t\t\t    position: absolute;\n\t\t\t\t\t\t\t\t\t\t    text-align: center;\n\t\t\t\t\t\t\t\t\t\t    top: 50%;\n\t\t\t\t\t\t\t\t\t\t    left: 50%;\n\t\t\t\t\t\t\t\t\t\t    transform: translate(-50%, -50%);\n\t\t\t\t\t\t\t\t\t\t    font-size: 0.8em;\n\t\t\t\t\t\t\t\t\t\t    font-family: 'Inter';\n\t\t\t\t\t\t\t\t\t\t    font-weight: normal;\n                                            text-shadow: 1px 0px 4px rgba(0,0,0,0.66);\n                                    }";let x=document.createElement("style");document.head.appendChild(w),document.head.appendChild(x);let k=!1;y.addEventListener("mousedown",F),y.addEventListener("touchstart",F),y.addEventListener("touchstart",(function(t){if(!E)return E=!0,setTimeout((function(){E=!1}),300),!1;t.preventDefault(),function(t=!0){const e=n.querySelector(".chatbox-view").querySelector(".input"),o=e.querySelector("input");e.style="display: block !important;",t&&o.focus(),o.addEventListener("blur",m)}()})),y.addEventListener("mouseup",L),y.addEventListener("touchend",L),y.addEventListener("mousemove",S),y.addEventListener("touchmove",S),C();var E=!1;function F(t){k=!0,t.preventDefault()}function L(t){k=!1,f[1]>30&&z(f[0]),C()}function S(t){if(!k)return;const e=v.getBoundingClientRect();b.getBoundingClientRect();let n=t.clientX-e.left,o=t.clientY-e.top;"touchmove"===t.type&&(n=t.touches[0].clientX-e.left,o=t.touches[0].clientY-e.top);const i=v.offsetWidth/2,a=v.offsetHeight/2;let s=(n-i)/(v.offsetWidth/2),l=(o-a)/(v.offsetHeight/2);s=Math.min(1,Math.max(-1,s)),l=Math.min(1,Math.max(-1,l));let r=Math.atan2(o-a,n-i)*(180/Math.PI),c=Math.min(v.offsetWidth/2,Math.sqrt(Math.pow(n-i,2)+Math.pow(o-a,2)));b.style.transition="none",b.style.transform=`translate(${c*Math.cos(r*(Math.PI/180))-i/2}px, ${c*Math.sin(r*(Math.PI/180))-a/2}px)`;c>30?(r>-25&&r<25?f[0]="GG!":r>65&&r<115?f[0]="Defending":r>-115&&r<-65?f[0]="Pass to me!":(r<-155||r>155)&&(f[0]="Teamwork!"),f[1]=c):(f[0]="",f[1]=0),g.innerText=f[0],g.style.opacity=c/50}function C(){b.style.transition="transform 0.4s ease-out",b.style.transform="translate(-50%, -50%)",f[0]="",f[1]=0,g.style.opacity="0"}if(e.innerHTML+=p,void 0!==h){let Y=document.createElement("link");Y.href=h.url,Y.rel="stylesheet",t.document.head.appendChild(Y),e.innerHTML+=`* {font-family: '${h.name}', ${h.type} !important;}`}function A(t){if(void 0!==r){var e=!1;t.addEventListener("touchstart",(function(n){if(!e)return e=!0,setTimeout((function(){e=!1}),300),!1;n.preventDefault(),function(){var e=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,button:2});t.dispatchEvent(e)}()}))}}function M(t){if(void 0!==a){const e=t.toLowerCase();n.querySelectorAll("tr").forEach((t=>{const n=t.querySelector('span[data-hook="name"]');n&&!n.textContent.toLowerCase().includes(e)?t.style.display="none":t.removeAttribute("style")}))}}void 0!==u&&(e.innerHTML+=`.choose-nickname-view>img {content: url("${u.url}");height:${u.height||"auto"};width:${u.width||"auto"}}`),document.querySelector(".header").remove();const q={arg:"0 000000 FFFFFF 0D8ED9 FFFFFF",fra:"0 E8B320 0F0D4D",gbr:"90 151AA1 151AA1 FFFFFF FFFFFF",ita:"180 D4BA91 2D4E9D",hvr:"0 3A33FF EBE6FF DBDBDB FFFFFF",jpn:"30 F2F2F2 1930FF 0066FF 101FA3"},I={bel:"0 000000 FF150D BD100A FF150D",bra:"0 167010 FFFF26 F7FF19 FFFF26",prt:"-60 FFCB21 0D3808 FF0D0D",nld:"0 0D0D40 FF9124 FFAE0D FF9124",esp:"0 EBC015 BF0000",mar:"FFFFFF 046317 FF0000 FF0000"};function j(t){const e="red"===t?I:q,n=Object.keys(e);j.currentIndex=j.currentIndex||{},j.currentIndex[t]=j.currentIndex[t]||0;const o=j.currentIndex[t];return j.currentIndex[t]=(o+1)%n.length,e[n[o]]}function T(t){if(void 0!==c){const e=t.target.hasAttribute("red")?"red":"blue";z(`/colors ${e} ${j(e)}`)}}function D(t){return n.querySelector('[data-hook="'+t+'"]')}function _(t,e){t.parentNode.insertBefore(e,t.nextSibling)}function z(t){const e=n.querySelector(".chatbox-view").querySelector("input");e.focus(),e.value=t,e.dispatchEvent(new KeyboardEvent("keydown",{key:"Enter",bubbles:!0,cancelable:!0,keyCode:13,which:13}))}function H(){const t=localStorage.getItem("show_fps")||1;n.querySelector(".stats-view").style=1==t?"":"opacity: 0 !important;",n.querySelector(".stats-view").ontouchstart=function(t){1==(localStorage.getItem("show_fps")||1)?(localStorage.setItem("show_fps",0),t.target.style="opacity: 0 !important;"):(localStorage.setItem("show_fps",1),t.target.style="")}}if(void 0!==i){const O=document.createElement("div"),G=document.createElement("div"),U=document.createElement("div"),J=document.createElement("div");O.setAttribute("id","joystick"),G.setAttribute("id","joystick-panel"),U.setAttribute("id","kick-panel"),J.setAttribute("id","stick"),O.style.visibility="hidden",document.body.appendChild(U),document.body.appendChild(G),G.appendChild(O),O.appendChild(J);let Q=document.createElement("style");Q.innerHTML="#joystick,\n                                    #stick {\n                                        touch-action: none;\n                                        background-color:#c2c2c255;\n                                        box-shadow:6px 6px 10px 0 #a5abb133,-5px -5px 9px 0 #a5abb133;\n                                        color:#dedede55;\n                                        font-weight:bolder;\n                                        font-size:1.5rem;\n                                        border-radius: 50%;\n                                    }\n\n                                    #joystick {\n                                        width: var(--joystick-size);\n                                        height: var(--joystick-size);\n                                        opacity: var(--joystick-opacity);\n                                        position: absolute;\n                                        left: var(--joystick-margin);\n                                        bottom: var(--joystick-margin);\n                                    }\n\n                                    #joystick-panel {\n                                        width: 45%;\n                                        height: 70%;\n                                        position: absolute;\n                                        left: 0;\n                                        bottom: 0;\n                                        display:none;\n                                    }\n\n                                    #kick-panel {\n                                        width: 45%;\n                                        height: 70%;\n                                        position: absolute;\n                                        right: 0;\n                                        bottom: 0;\n                                        display:none;\n                                    }\n\n                                    #stick {\n                                        width: calc(var(--joystick-size) * .45);\n                                        height: calc(var(--joystick-size) * .45);\n                                        position: absolute;\n                                        top: calc(50% - var(--joystick-size) * .45 /2);\n                                        left: calc(50% - var(--joystick-size) * .45 /2);\n                                        transform: translate(0%, 0%)\n                                    }";let tt=document.createElement("style");document.head.appendChild(Q),document.head.appendChild(tt);let et=!1;let nt={W:0,A:0,S:0,D:0};function F(t){et=!0;if(0==(localStorage.getItem("input_fixed")||0)){const e=O.getBoundingClientRect();let n=t.touches[0].clientX-e.left,o=t.touches[0].clientY-e.top;n-=O.offsetWidth/2,o-=O.offsetHeight/2,O.style.transform=`translate(${n}px,${o}px)`}O.style.visibility="visible",t.preventDefault()}function L(t){et=!1;0==(localStorage.getItem("input_fixed")||0)&&(O.style.transform="",O.style.visibility="hidden"),J.style.transition="transform 0.1s ease-out",J.style.transform="translate(0%, 0%)",nt.W=0,nt.A=0,nt.S=0,nt.D=0,B("")}function S(t){if(!et)return;localStorage.getItem("input_pwm");const e=O.getBoundingClientRect();let n=t.clientX-e.left,o=t.clientY-e.top;"touchmove"===t.type&&(n=t.touches[0].clientX-e.left,o=t.touches[0].clientY-e.top);const i=O.offsetWidth/2,a=O.offsetHeight/2;let s=n-i,l=o-a;const r=Math.sqrt(s**2+l**2),c=Math.min(i,a),d=Math.min(1,r/c);let p=Math.atan2(l,s)*(180/Math.PI);if(p<0&&(p+=360),d>.25){switch(Math.round(p/45)%8){case 0:B("d");break;case 1:B("sd");break;case 2:B("s");break;case 3:B("sa");break;case 4:B("a");break;case 5:B("wa");break;case 6:B("w");break;case 7:B("wd")}}else B("");s=s/r*d*c,l=l/r*d*c,J.style.transition="none",J.style.transform=`translate(${s}px, ${l}px)`}function B(t){let e={w:!1,a:!1,s:!1,d:!1};for(var n=0;n<t.length;n++){e[t[n]]=!0}try{Z("KeyW",e.w),Z("KeyA",e.a),Z("KeyS",e.s),Z("KeyD",e.d)}catch{}}function Z(e,n){n?t.document.dispatchEvent(new KeyboardEvent("keydown",{code:e})):t.document.dispatchEvent(new KeyboardEvent("keyup",{code:e}))}function $(){Z("KeyX",!0)}function N(){Z("KeyX",!1)}function W(t,e=!1){if(void 0!==i)if(t){const t=localStorage.getItem("input_fixed")||0;G.style.display="block",U.style.display="block",document.body.querySelector("#chat-joystick-panel").style.display="block",1==t&&(O.style.transform="",O.style.visibility="visible"),V()}else G.style.display="none",U.style.display="none",O.style.transform="",O.style.visibility="hidden",e||(document.body.querySelector("#chat-joystick-panel").style.display="none")}function K(t){localStorage.setItem("input_opacity",t.target.value),t.target.parentNode.children[1].innerText=t.target.value,"input"==t.type?(G.style.display="block",O.style.visibility="visible",O.style.transform="",y.style.display="block"):(G.style.display="none",O.style.visibility="hidden",y.style.display="none"),V()}function P(t){localStorage.setItem("input_margin",t.target.value),t.target.parentNode.children[1].innerText=t.target.value,"input"==t.type?(G.style.display="block",O.style.visibility="visible",O.style.transform=""):(G.style.display="none",O.style.visibility="hidden"),V()}function R(t){let e=t.target.children[0];e.classList.contains("icon-cancel")?(e.classList.add("icon-ok"),e.classList.remove("icon-cancel"),D("inputmargin-range").parentNode.style.display="flex",localStorage.setItem("input_fixed",1)):(e.classList.remove("icon-ok"),e.classList.add("icon-cancel"),O.style.visibility="hidden",D("inputmargin-range").parentNode.style.display="none",localStorage.setItem("input_fixed",0)),V()}function X(t){localStorage.setItem("input_size",t.target.value),t.target.parentNode.children[1].innerText=t.target.value,"input"==t.type?(G.style.display="block",O.style.visibility="visible",O.style.transform=""):(G.style.display="none",O.style.visibility="hidden"),V()}function V(){const t=localStorage.getItem("input_opacity")||.8,e=localStorage.getItem("input_size")||40;let n;n=1==(localStorage.getItem("input_fixed")||0)?localStorage.getItem("input_margin")||10:0,tt.innerHTML=":root {--joystick-size: "+e+"vh;--joystick-margin: "+n+"vh;--joystick-opacity: "+t+"}"}G.addEventListener("mousedown",F),G.addEventListener("touchstart",F),G.addEventListener("mouseup",L),G.addEventListener("touchend",L),G.addEventListener("mousemove",S),G.addEventListener("touchmove",S),U.addEventListener("mousedown",$),U.addEventListener("touchstart",$),U.addEventListener("mouseup",N),U.addEventListener("touchend",N)}
