document.head.appendChild(Object.assign(document.createElement("style"),{innerHTML:"#thumb,body{touch-action:none}body{user-select:none;height:100%}@media only screen and (max-device-width:480px){body{touch-action:manipulation}}.header,.rightbar{display:none!important}.rounded{border:none;border-radius:50%}[view|=hidden]{display:none}[view|=visible]{display:flex;justify-content:center;align-items:center}[float]{position:absolute}svg{fill:#ecf0f3cc;width:30px;height:auto}#kick svg{width:50%}"})),document.querySelector(".gameframe").contentWindow.document.head.appendChild(Object.assign(document.createElement("style"),{innerHTML:".room-view,.roomlist-view{height:100%;margin-top:0}.game-view>.top-section,.room-view{margin-top:0}.settings-view{width:100%;max-height:none}.game-view>[data-hook=popups]{background-color:#1a212585}.disconnected-view .dialog,.disconnected-view .room-view>.container{width:450px}.create-room-view>.dialog,.room-view.create-room-view>.container{max-width:450px;width:100%}body{background:#1a2125}[data-hook=leave-btn]{background:#c13535!important}.file-btn,[data-hook=rec-btn]{display:none!important}h1{text-align:center}.room-view>.container>.header-btns{bottom:0;right:10px;top:auto}.room-view>.container{max-width:none;max-height:max-content}.room-view{position:absolute;width:100%}.roomlist-view>.dialog{max-width:max-content;max-height:max-content}.game-state-view .bar>.scoreboard{display:flex;align-items:center;margin-right:50px}.chatbox-view{position:absolute;left:15px;margin:0;top:10px;width:30%;pointer-events:none;font-size:1rem;display:contents}.chatbox-view-contents{flex-direction:column-reverse;background:0 0;pointer-events:none}.chatbox-view-contents>.input{margin-bottom:10px;pointer-events:auto}.chatbox-view-contents>.log{flex-direction:column;pointer-events:none;overflow-y:scroll;scrollbar-width:none}.settings-view .section.selected{display:flex;align-items:center}.log-contents{display:flex;flex-direction:column-reverse;text-shadow:1px 1px 5px #000000cc}.fade-out{opacity:0;transition:opacity 10s ease-out}thead tr{display:table-row!important}svg{width: 1em}.input-options{position: absolute;width: 100%;height: 100%;z-index: 20;background-color: #1a2125;}"}));let e,t=document.querySelector(".gameframe").contentWindow;const n=["Tip: maintain a good defensive position.","Tip: communicate and coordinate with your teammates.","Tip: practice your dribbling skills to outplay opponents.","Tip: learn to anticipate the movements of the ball and players.","Tip: don't rush when shooting; find the right moment.","Tip: control your speed to maintain ball control.","Tip: use rebounds off walls to surprise opponents.","Tip: adapt your strategy based on team size and game mode.","Tip: be patient in defense and wait for the right moment to attack.","Tip: practice synchronization in passes and shots with your team.","Tip: maintain a balance between offense and defense.","Tip: study your opponents' playing style to anticipate their moves.","Tip: avoid standing still; move constantly to be unpredictable.","Tip: keep an eye on your teammates' positions to facilitate passes.","Tip: be aware of the remaining time and adjust your strategy accordingly.","Tip: learn to use rebounds in the corners to create opportunities.","Tip: be a versatile player, capable of playing different roles in the team.","Tip: avoid constantly colliding with teammates; maintain space.","Tip: use the chat to quickly coordinate tactics with your team.","Tip: analyze your mistakes and learn from them to improve your game.","Tip: watch matches of experienced players to learn new strategies.","Tip: do not underestimate the importance of a good pass; it can change the course of the game.","Tip: stay calm in pressure situations; concentration is key.","Tip: play regularly to improve your consistency and skills.","Tip: coordinate pressing strategies with your teammates to force errors in the opposing team.","Tip: be a fair player; respect is fundamental.","Tip: adapt your playing style based on the number of players on the field.","Tip: don't be afraid to try new tactics and adjust your approach.","Tip: be aware of your own goalkeeper's position to avoid own goals.","Tip: use wall rebounds to make unexpected shots.","Tip: learn to read the plays of the opposing team to anticipate their movements.","Tip: have fun and enjoy the game; a positive attitude enhances performance."];window.addEventListener("gamepadconnected",(e=>{console.log("SHARE_MESSAGE",e.gamepad.id)}));const o="#joystick,#kick{z-index:100;bottom:CONTROLS_MARGINvw}.neo{opacity:CONTROLS_OPACITY;background-color:#c2c2c255;box-shadow:6px 6px 10px 0 #a5abb133,-5px -5px 9px 0 #a5abb133;color:#dedede55;font-weight:bolder;font-size:1.5rem}.sizer{width:CONTROLS_WIDTH%;aspect-ratio: 1 / 1;}#joystick{left:CONTROLS_MARGIN%;overflow:visible}#thumb{width:40%;height:40%;background-color:#ecf0f3cc}#kick{right:CONTROLS_MARGIN%}button.neo:active{opacity:KICK_OPACITY}",i=document.createElement("style"),a=document.createElement("style"),r=document.createElement("span"),c=document.createElement("div"),l=document.createElement("div"),s={childList:!0,subtree:!0};let d,u,p,h=!0,m=!0;var y=setInterval((function(){!t.document.body.querySelector(".loader-view")&&t.document.body.querySelector(".choose-nickname-view")&&(clearInterval(y),e=t.document.body.children[0],function(){document.querySelector(".rightbar").remove(),document.querySelector(".header").remove(),document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=0"),i.innerHTML="",i.name="stylesheet",t.document.head.appendChild(i),function(){a.name="stylesheet",document.head.appendChild(a),l.setAttribute("class","input-options"),l.setAttribute("hidden",""),l.innerHTML='<div class="dialog settings-view" style="height:min-content"><h1>Controls</h1><button data-hook="closeinput" style="position:absolute;top:12px;right:10px">Back</button><div class="tabcontents"><div class="section selected"><div class="option-row"><div style="margin-right:10px;flex:1;min-width:60px">Size</div><div style="width:45px">0</div><input class="slider" type="range" min="10" max="30" step="0.01"></div><div class="option-row"><div style="margin-right:10px;flex:1;min-width:60px">Margin</div><div style="width:45px">0</div><input class="slider" type="range" min="0" max="15" step="0.01"></div><div class="option-row"><div style="margin-right:10px;flex:1;min-width:60px">Opacity</div><div style="width:45px">0</div><input class="slider" type="range" min="0.2" max="1" step="0.01"></div><br><button data-hook="resetinput">Reset</button></div></div></div>',e.parentNode.appendChild(l),e.parentNode.querySelector('[data-hook="closeinput"]').addEventListener("click",(function(){l.setAttribute("hidden",""),S(!1)})),e.parentNode.querySelector('[data-hook="resetinput"]').addEventListener("click",(function(){E(20,5,1,!0)})),l.querySelectorAll(".option-row")[0].children[2].addEventListener("input",T),l.querySelectorAll(".option-row")[1].children[2].addEventListener("input",T),l.querySelectorAll(".option-row")[2].children[2].addEventListener("input",T),u=document.createElement("div"),u.setAttribute("class","neo rounded sizer"),u.setAttribute("view","hidden"),u.setAttribute("float",""),u.setAttribute("id","joystick"),u.innerHTML='<div id="thumb" class="rounded" float></div>',u.addEventListener("touchstart",L),u.addEventListener("touchmove",A),u.addEventListener("touchend",M),p=document.createElement("button"),p.setAttribute("class","neo rounded sizer"),p.setAttribute("view","hidden"),p.setAttribute("float",""),p.setAttribute("id","kick"),p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M290 49c-16 0-32 14-38 36-6 25 5 48 22 52 18 5 39-10 45-35 7-25-5-48-22-52l-7-1zM89 68 78 87c32 16 63 34 96 47l28-12c-40-16-77-34-113-54zm148 56c-48 26-98 42-154 62l9 16c52-16 111-33 161-56-7-6-12-13-16-22zm30 35c-22 11-46 20-71 29-20 45-28 95-37 140l-2 11-101-40-16 26 130 60 3-4 15-29a1672 1672 0 0 0 79-193zm-31 135-17 36c25 37 57 79 95 109l23-17c-36-40-73-85-101-128zm188 73a48 48 0 0 0-48 48 48 48 0 0 0 48 48 48 48 0 0 0 48-48 48 48 0 0 0-48-48z"/></svg>',p.addEventListener("touchstart",(function(){q("keydown")})),p.addEventListener("touchend",(function(){q("keyup")})),document.body.appendChild(u),document.body.appendChild(p);const t=JSON.parse(localStorage.getItem("controls"));null===t?E(20,5,1,!0):E(t[0],t[1],t[2],!0);H()}(),r.setAttribute("data-hook","copyright"),r.setAttribute("style","text-align:center;position:absolute;bottom:15px;width:100%; display: block"),r.innerHTML="2024 Vixel Dev. Original game by Mario Carbajal (@basro)",document.body.appendChild(r);const n=new MutationObserver((function(e,t){try{f(),function(){const e=b("log"),t=e.firstChild.children,n=5;if(d!==e.firstChild.lastChild){if(t.length>n)for(let e=0;e<t.length-n;e++)t[e].style.display="none";const o=e.firstChild.lastChild;o.style.opacity=1,setTimeout((()=>{o.classList.add("fade-out"),o.removeAttribute("style")}),500),d=o}e.scrollTop=0}()}catch{}}));try{f()}catch{}n.observe(e,s),c.setAttribute("data-hook","about"),c.style.cssText="background: #1a2125; position: absolute; width: 100%; height: 100%; display: none; justify-content: center; flex-direction: column; align-items: center; margin: 0;",c.innerHTML='<div class="dialog basic-dialog" style="max-width: 50%;"><h1>About us</h1><p>We are Vixel Dev, a small development studio that wants the Haxball community to grow, without hurting its owners. We do not monetize this application, as it is free and contains no ads. </p><p>We want to thank @basro for creating this game, and we hope not to disturb with this port. </p><p></p><p>To contact us:</p><p>E-mail: vixeldev@gmail.com</p><p>Instragram: @haxballmobile</p><div class="buttons"><button data-hook="closeabout">Close</button></div></div>',e.parentNode.appendChild(c),null===localStorage.getItem("firstTime")&&(c.style.display="flex",localStorage.setItem("firstTime",!0),localStorage.setItem("view_mode",1),localStorage.setItem("resolution_scale",.75));e.parentNode.querySelector('[data-hook="closeabout"]').addEventListener("click",(function(){c.style.display="none"})),console.log("PAGE_LOADED")}())}),1e3);function v(e,t){e.parentNode.insertBefore(t,e.nextSibling)}function b(t){return e.querySelector('[data-hook="'+t+'"]')}function g(){const t=b("search").value.toLowerCase();e.querySelectorAll("tr").forEach((e=>{const n=e.querySelector('span[data-hook="name"]');n&&!n.textContent.toLowerCase().includes(t)?e.style.display="none":e.removeAttribute("style")}))}function w(e){r.style.display=e?"block":"none"}function f(){if(e.querySelector(".choose-nickname-view")&&(S(!1),w(!0),console.log("PAGE_LOADED")),e.querySelector(".roomlist-view"))w(!1),h=!0,b("search")||function(){const t=document.createElement("div");t.className="label-input",t.style.backgroundColor="transparent",t.innerHTML='<label>Search a room:</label><input data-hook="search" type="text">';const o=e.querySelector("div.dialog").querySelector("p:nth-child(2)");v(o,t),o.innerHTML=(i=n,Array.isArray(i)&&0!==i.length?i[Math.floor(Math.random()*i.length)]:null);var i;t.querySelector("input").addEventListener("input",g)}(),b("url-room")||function(){let t=document.createElement("button");t.setAttribute("data-hook","url-room"),t.innerHTML='<i class="icon-link"></i><div>URL Room</div>',t.addEventListener("click",(function(){if(!e.querySelector('[data-hook="input-url"]')){let t=document.createElement("form");t.action="javascript:void(0);",t.innerHTML='<div class="label-input" style="background-color: transparent"><label>URL:</label><input data-hook="input-url" type="url"></div>',v(e.querySelector("div.dialog > p:nth-child(2)"),t),b("search").parentNode.style.display="none",b("input-url").focus(),b("input-url").addEventListener("blur",(function(){b("search").parentNode.style.display="flex",t.remove()})),t.addEventListener("submit",(function(){!function(e){const t=e.replace(/^https?:\/\/(www\.)?haxball\.com\/play\?c=/,"");t.length>0&&window.location.replace("https://www.haxball.com/play?c="+t)}(b("input-url").value)}))}})),v(b("join"),t)}(),b("fil-cou")||function(){let t=document.createElement("span");t.setAttribute("class","bool"),t.setAttribute("data-hook","fil-cou"),t.innerHTML='Show other countries <i class="icon-ok"></i>',i.innerHTML="",t.addEventListener("click",(function(){!function(e){const t=localStorage.getItem("geo_override")||localStorage.getItem("geo");if(t){const n=JSON.parse(t).code;"icon-cancel"===e.lastChild.getAttribute("class")?(e.lastChild.setAttribute("class","icon-ok"),i.innerHTML=""):(e.lastChild.setAttribute("class","icon-cancel"),i.innerHTML="tr:not(:has(div.f-"+n+")){display: none;}"),b("listscroll").scrollTop=0}}(t)})),e.querySelector(".filters").prepend(t)}(),b("aboutbtn")||function(){let t=document.createElement("button");t.setAttribute("data-hook","aboutbtn"),t.innerHTML='<i class="icon-attention"></i><div>About us</div>',t.addEventListener("click",(function(){c.style.display="flex"})),v(e.querySelector(".buttons .spacer"),t)}(),b("count")&&b("count").remove(),S(!1);else if(e.querySelector(".create-room-view"))w(!0),S(!1);else if(e.querySelector(".settings-view")){w(!1),null!=l.getAttribute("hidden")&&S(!1);try{const e=b("videosec");10==e.children.length&&(e.lastChild.remove(),e.lastChild.remove(),e.lastChild.remove())}catch{}b("newinputbtn")||(t=b("inputbtn"),(o=t.cloneNode(!0)).setAttribute("data-hook","newinputbtn"),o.addEventListener("click",(function(){S(!0),l.removeAttribute("hidden"),H()})),t.parentNode.replaceChild(o,t)),m=!0}else e.querySelector(".g-recaptcha-response")?(w(!1),S(!1),H(),m=!0):e.querySelector(".game-view")&&!e.querySelector(".room-view")?m&&(w(!1),S(!0),x(),H(),m=!1):e.querySelector(".game-view")&&!e.querySelector(".room-link-view")?(w(!1),S(!1),b("store")||function(){let t=document.createElement("button");t.setAttribute("data-hook","store"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 407 407" fill="white" style="height:0.85em; width: auto"><path d="M402 84 323 5c-3-3-7-5-12-5H17C8 0 0 8 0 17v373c0 9 8 17 17 17h373c9 0 17-8 17-17V96c0-4-2-9-5-12zm-101 80H67V39h234v125z"></path><path d="M214 148h43c3 0 6-2 6-6V60c0-4-3-6-6-6h-43c-3 0-6 2-6 6v82c0 4 3 6 6 6z"></path></svg> Store',v(b("rec-btn"),t),t.addEventListener("click",(function(){!function(t){const n=e.querySelector(".chatbox-view").querySelector("input");n.focus(),n.value=t,n.dispatchEvent(new KeyboardEvent("keydown",{key:"Enter",bubbles:!0,cancelable:!0,keyCode:13,which:13}))}("/store")}))}(),x(),H(),m=!0):e.querySelector(".room-link-view")&&(S(!1),b("share")||function(){let e=document.createElement("button");e.setAttribute("data-hook","share"),e.innerHTML="Share",v(b("copy"),e),e.addEventListener("click",(function(){console.log("SHARE_MESSAGEüéÆ‚öΩÔ∏è Join my Haxball Mobile room by copying and pasting the following link: "+b("link").value)}))}(),m=!0);var t,o}function x(){const t=e.querySelector(".chatbox-view");if(!b("chat-toggle")){const t=document.createElement("button");t.setAttribute("data-hook","chat-toggle"),t.setAttribute("style","display: flex; justify-content: center; align-items: center;"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20"><path fill="white" d="M5.8 12.2V6H2C.9 6 0 6.9 0 8v6c0 1.1.9 2 2 2h1v3l3-3h5c1.1 0 2-.9 2-2v-1.82a.943.943 0 0 1-.2.021h-7zM18 1H9c-1.1 0-2 .9-2 2v8h7l3 3v-3h1c1.1 0 2-.899 2-2V3c0-1.1-.9-2-2-2"/></svg>',t.addEventListener("click",k),e.querySelector(".sound-button-container").parentNode.prepend(t)}if(h){e.querySelector(".drag").remove();e.querySelector(".stats-view-container").style.cssText="display: none;",b("log-contents").firstChild.remove(),b("menu").innerHTML='<i class="icon-menu"></i>';const n=t.querySelector(".input").style;n.display="none",t.querySelector("input").addEventListener("blur",(function(){n.display="none"})),h=!1}}function k(){const t=e.querySelector(".chatbox-view"),n=t.querySelector(".input").style;n.display="none"===n.display?"block":"none","block"==n.display&&t.querySelector("input").focus()}function S(e){e?(u.setAttribute("view","visible"),p.setAttribute("view","visible")):(u.setAttribute("view","hidden"),p.setAttribute("view","hidden"))}function T(){let e=l.querySelectorAll(".option-row");E(e[0].children[2].value,e[1].children[2].value,e[2].children[2].value)}function E(e,t,n,i=!1){if(i){let o=l.querySelectorAll(".option-row");o[0].children[2].value=e,o[1].children[2].value=t,o[2].children[2].value=n}localStorage.setItem("controls",JSON.stringify([e,t,n])),a.innerHTML=o.replace(/CONTROLS_WIDTH/g,e.toString()).replace(/CONTROLS_MARGIN/g,t.toString()).replace(/CONTROLS_OPACITY/g,n.toString()).replace(/KICK_OPACITY/g,(n/2).toString()),function(){let e=l.querySelectorAll(".option-row");e[0].children[1].innerHTML=e[0].children[2].value,e[1].children[1].innerHTML=e[1].children[2].value,e[2].children[1].innerHTML=e[2].children[2].value}(),H()}function L(e){isTouching=!0,C(e.touches[0])}function A(e){isTouching&&C(e.touches[0])}function M(){isTouching=!1,H()}function q(e){try{t.document.dispatchEvent(new KeyboardEvent(e,{code:"KeyX"}))}catch{}}function C(e){const t=u.getBoundingClientRect(),n=t.left+t.width/2,o=t.top+t.height/2,i=e.clientX-n,a=e.clientY-o,r=Math.atan2(a,i),c=Math.min(u.clientWidth/2,Math.hypot(i,a)),l=n+c*Math.cos(r),s=o+c*Math.sin(r);thumb.style.left=l-t.left-thumb.clientWidth/2+"px",thumb.style.top=s-t.top-thumb.clientHeight/2+"px";const d=180*((r+2*Math.PI)%(2*Math.PI))/Math.PI;switch(Math.round(d/45)%8){case 0:O("d");break;case 1:O("sd");break;case 2:O("s");break;case 3:O("sa");break;case 4:O("a");break;case 5:O("wa");break;case 6:O("w");break;case 7:O("wd")}}function H(){u.getBoundingClientRect();thumb.style.left=u.clientWidth/2-thumb.clientWidth/2+"px",thumb.style.top=u.clientHeight/2-thumb.clientHeight/2+"px",O("")}function O(e){let n={w:"keyup",a:"keyup",s:"keyup",d:"keyup"};for(var o=0;o<e.length;o++){n[e[o]]="keydown"}try{t.document.dispatchEvent(new KeyboardEvent(n.w,{code:"KeyW"})),t.document.dispatchEvent(new KeyboardEvent(n.a,{code:"KeyA"})),t.document.dispatchEvent(new KeyboardEvent(n.s,{code:"KeyS"})),t.document.dispatchEvent(new KeyboardEvent(n.d,{code:"KeyD"}))}catch{}}function q(e){try{t.document.dispatchEvent(new KeyboardEvent(e,{code:"KeyX"}))}catch{}}
